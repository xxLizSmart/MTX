import{c as f,a as B,d as A,r as i,j as e,m as P,B as w,e as c}from"./index-a74a7c1a.js";import{H as R}from"./Helmet-9de942c9.js";import{C as d,a as m,b as p,d as T,c as h}from"./card-1049f9d3.js";import{I as k}from"./input-e2d4a862.js";import{L as x}from"./label-7491db19.js";import{S as I,a as M,b as q,c as L,d as u}from"./select-a7c9d65a.js";import{C as V}from"./copy-a8b8b819.js";const $=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),z=f("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),G=f("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Y=()=>{const{user:j}=B(),{toast:o}=A(),[s,E]=i.useState("USDT"),[n,y]=i.useState(""),[r,g]=i.useState(null),[b,C]=i.useState(!1),a={USDT:{address:"TPebRFeKyyihDTfB7G9qKN2wS9pEamScfp",network:"TRC20",icon:"https://cryptologos.cc/logos/tether-usdt-logo.png"},ETH:{address:"0xb38d6b91749f53aca752fb0c2bda03d643739830",network:"ERC-20",icon:"https://cryptologos.cc/logos/ethereum-eth-logo.png"},BTC:{address:"14gyyiVkfVAZRtx42miquQfr9j4GyTUJHH",network:"Bitcoin",icon:"https://cryptologos.cc/logos/bitcoin-btc-logo.png"}},D=()=>{navigator.clipboard.writeText(a[s].address),o({title:"Copied!",description:"Wallet address copied to clipboard."})},F=t=>{t.target.files&&t.target.files[0]&&g(t.target.files[0])},U=async t=>{if(t.preventDefault(),!n||!r){o({variant:"destructive",title:"Missing Information",description:"Please enter amount and upload proof."});return}C(!0);try{const l=r.name.split(".").pop(),v=`${j.id}/${Math.random()}.${l}`,{error:N}=await c.storage.from("deposits").upload(v,r);if(N)throw new Error(`Upload failed: ${N.message}`);const{data:{publicUrl:H}}=c.storage.from("deposits").getPublicUrl(v),{error:S}=await c.from("deposits").insert({user_id:j.id,amount:parseFloat(n),currency:s,proof_url:H,status:"pending"});if(S)throw S;o({title:"Deposit Submitted",description:"Your deposit is pending approval."}),y(""),g(null)}catch(l){console.error(l),o({variant:"destructive",title:"Error",description:l.message})}finally{C(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx("title",{children:"Deposit - MetaTradeX"})}),e.jsx("div",{className:"container mx-auto p-4 max-w-2xl",children:e.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Deposit Funds"}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(m,{children:[e.jsx(p,{children:"Select Currency"}),e.jsx(T,{children:"Choose the cryptocurrency you wish to deposit."})]}),e.jsx(h,{children:e.jsxs(I,{value:s,onValueChange:E,children:[e.jsx(M,{children:e.jsx(q,{placeholder:"Select Currency"})}),e.jsxs(L,{children:[e.jsx(u,{value:"USDT",children:"Tether (USDT) - TRC20"}),e.jsx(u,{value:"ETH",children:"Ethereum (ETH)"}),e.jsx(u,{value:"BTC",children:"Bitcoin (BTC)"})]})]})})]}),e.jsxs(d,{className:"mb-6",children:[e.jsx(m,{children:e.jsx(p,{children:"Payment Details"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("img",{src:a[s].icon,alt:s,className:"w-12 h-12"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Network: ",a[s].network]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Wallet Address"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{readOnly:!0,value:a[s].address,className:"font-mono text-sm"}),e.jsx(w,{variant:"outline",size:"icon",onClick:D,children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"Send only ",s," (",a[s].network,") to this address."]})]})]})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Confirm Deposit"}),e.jsx(T,{children:"Enter the amount sent and upload proof of payment."})]}),e.jsx(h,{children:e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"amount",children:"Amount Sent"}),e.jsx(k,{id:"amount",type:"number",placeholder:"0.00",value:n,onChange:t=>y(t.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"proof",children:"Proof of Payment (Screenshot)"}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:bg-muted/50 transition-colors cursor-pointer relative",children:[e.jsx("input",{type:"file",id:"proof",accept:"image/*",onChange:F,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx("div",{className:"flex flex-col items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-8 w-8 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload screenshot"})]})})]})]}),e.jsx(w,{type:"submit",className:"w-full",disabled:b,children:b?"Submitting...":"Submit Deposit"})]})})]})]})})]})};export{Y as default};
