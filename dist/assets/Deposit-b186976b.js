import{c as x,a as F,d as P,r as n,j as e,m as q,B as w,e as i}from"./index-54782b7e.js";import{H as z}from"./Helmet-ef389142.js";import{C as d,a as m,b as p,d as S,c as h}from"./card-3a5886c1.js";import{I as T}from"./input-79cb34a4.js";import{L as u}from"./label-c6eae2b9.js";import{S as A,a as H,b as M,c as B,d as I}from"./select-8467d8a7.js";import{C as L}from"./copy-dca820d3.js";const _=x("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),W=x("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),X=x("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),J=()=>{const{user:f}=F(),{toast:c}=P(),[s,k]=n.useState("USDT_TRC20"),[l,b]=n.useState(""),[o,g]=n.useState(null),[j,y]=n.useState(!1),t={USDT_TRC20:{label:"TRC20 Primary",address:"TGiVATRc2m9gR8CrsWicdjT85eQduKdCv7",network:"TRC20",currency:"USDT",icon:"https://cryptologos.cc/logos/tether-usdt-logo.png",qr:"https://horizons-cdn.hostinger.com/99b11fa1-2bd3-41b7-81bc-612ff4483c7a/7f0438f952703496b6f01200f958279c.jpg"},USDT_ERC20:{label:"ERC20 Primary (USDT)",address:"0xaedebf28b3661d8266120f31008b8c6757079c1f",network:"ERC20",currency:"USDT",icon:"https://cryptologos.cc/logos/tether-usdt-logo.png",qr:"https://horizons-cdn.hostinger.com/99b11fa1-2bd3-41b7-81bc-612ff4483c7a/d05c22c6c88a5782652e213b7bb8d315.jpg"},BTC:{label:"BTC Primary",address:"1Mp5fM4Uti1Tw2yJXZq5FRNXWKpXLjuzY2",network:"Bitcoin",currency:"BTC",icon:"https://cryptologos.cc/logos/bitcoin-btc-logo.png",qr:"https://horizons-cdn.hostinger.com/99b11fa1-2bd3-41b7-81bc-612ff4483c7a/c23861a72c52e6439c69d99326bd4830.jpg"},ETH:{label:"ETH Primary",address:"0xaedebf28b3661d8266120f31008b8c6757079c1f",network:"ERC20",currency:"ETH",icon:"https://cryptologos.cc/logos/ethereum-eth-logo.png",qr:"https://horizons-cdn.hostinger.com/99b11fa1-2bd3-41b7-81bc-612ff4483c7a/d05c22c6c88a5782"}},E=()=>{navigator.clipboard.writeText(t[s].address),c({title:"Copied!",description:"Wallet address copied to clipboard."})},D=r=>{r.target.files&&r.target.files[0]&&g(r.target.files[0])},R=async r=>{if(r.preventDefault(),!l||!o){c({variant:"destructive",title:"Missing Information",description:"Please enter amount and upload proof."});return}y(!0);try{const a=o.name.split(".").pop(),C=`${f.id}/${Math.random()}.${a}`,{error:N}=await i.storage.from("deposits").upload(C,o);if(N)throw new Error(`Upload failed: ${N.message}`);const{data:{publicUrl:U}}=i.storage.from("deposits").getPublicUrl(C),{error:v}=await i.from("deposits").insert({user_id:f.id,amount:parseFloat(l),currency:t[s].currency,proof_url:U,status:"pending"});if(v)throw v;c({title:"Deposit Submitted",description:"Your deposit is pending approval."}),b(""),g(null)}catch(a){console.error(a),c({variant:"destructive",title:"Error",description:a.message})}finally{y(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx("title",{children:"Deposit - MetaTradeX"})}),e.jsx("div",{className:"container mx-auto p-4 max-w-2xl",children:e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Deposit Funds"}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(m,{children:[e.jsx(p,{children:"Select Currency"}),e.jsx(S,{children:"Choose the cryptocurrency you wish to deposit."})]}),e.jsx(h,{children:e.jsxs(A,{value:s,onValueChange:k,children:[e.jsx(H,{children:e.jsx(M,{placeholder:"Select Network"})}),e.jsx(B,{children:Object.entries(t).map(([r,a])=>e.jsx(I,{value:r,children:a.label},r))})]})})]}),e.jsxs(d,{className:"mb-6",children:[e.jsx(m,{children:e.jsx(p,{children:"Payment Details"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsx("img",{src:t[s].icon,alt:t[s].currency,className:"w-12 h-12"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:t[s].label}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Network: ",t[s].network]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:t[s].qr,alt:"QR Code",className:"w-48 h-48 rounded-lg border border-border object-contain bg-white p-2"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Wallet Address"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{readOnly:!0,value:t[s].address,className:"font-mono text-sm"}),e.jsx(w,{variant:"outline",size:"icon",onClick:E,children:e.jsx(L,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3"}),"Send only ",t[s].currency," (",t[s].network,") to this address."]})]})]})]}),e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Confirm Deposit"}),e.jsx(S,{children:"Enter the amount sent and upload proof of payment."})]}),e.jsx(h,{children:e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"amount",children:"Amount Sent"}),e.jsx(T,{id:"amount",type:"number",placeholder:"0.00",value:l,onChange:r=>b(r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"proof",children:"Proof of Payment (Screenshot)"}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:bg-muted/50 transition-colors cursor-pointer relative",children:[e.jsx("input",{type:"file",id:"proof",accept:"image/*",onChange:D,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx("div",{className:"flex flex-col items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-8 w-8 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:o.name})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload screenshot"})]})})]})]}),e.jsx(w,{type:"submit",className:"w-full",disabled:j,children:j?"Submitting...":"Submit Deposit"})]})})]})]})})]})};export{J as default};
